\documentclass[twoside]{article}
\usepackage{multicol}
\setlength{\columnsep}{4cm}
\setlength{\columnseprule}{0pt}
\usepackage[shortlabels]{enumitem}
\setlist[enumerate]{topsep=0pt,itemsep=-0.5ex,partopsep=0.5ex,parsep=0.5ex}

% fonts
    \usepackage[sc]{mathpazo} % Use the Palatino font
    \usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs
    \linespread{1.05} % Line spacing - Palatino needs more space between lines
    \usepackage{microtype} % Slightly tweak font spacing for aesthetics

    \usepackage[english]{babel} % Language hyphenation and typographical rules

    \usepackage[hmarginratio=1:1,top=32mm,columnsep=20pt]{geometry} % Document margins
    \usepackage[hang, small,labelfont=bf,up,textfont=it,up]{caption} % Custom captions under/above floats in tables or figures
    \usepackage{booktabs} % Horizontal rules in tables

    \usepackage{titling} % Customizing the title section
    \usepackage{abstract} % Allows abstract customization
    \renewcommand{\abstractnamefont}{\normalfont\bfseries} % set abstract title to bold
    \renewcommand{\abstracttextfont}{\normalfont\small\itshape} % set abstract text to small italic
    \renewcommand{\maketitlehookd}{
        \begin{abstract}
        \abstracttext
        \end{abstract}
    }

    \usepackage{titlesec} % Allows customization of titles
    \setlength{\droptitle}{-4\baselineskip} % Move the title up
    \renewcommand\thesection{\Roman{section}} % Roman numerals for the sections
    \renewcommand\thesubsection{\roman{subsection}} % roman numerals for subsections
    \titleformat{\section}[block]{\large\scshape\centering}{\thesection.}{1em}{} % Change the look of the section titles
    \titleformat{\subsection}[block]{\large}{\thesubsection.}{1em}{} % Change the look of the section titles
    \pretitle{\begin{center}\Huge\bfseries} % Article title formatting
    \posttitle{\end{center}} % Article title closing formatting

    \usepackage{fancyhdr} % Headers and footers
    \pagestyle{fancy} % All pages have headers and footers
    \fancyhead{} % Blank out the default header
    \fancyfoot{} % Blank out the default footer
    \fancyhead[C]{} % Custom header text
    \fancyfoot[RO,LE]{\thepage} % Custom footer text

    %\usepackage{scalerel,stackengine}
    %\stackMath
    \usepackage[utf8]{inputenc}
    \usepackage{amsmath} % aligned
    \usepackage{tikz} % overdash
    %\usepackage{MnSymbol} % https://texdoc.org/serve/symbols-a4.pdf/0
    \usepackage{hyperref} % hyperlinks
    \hypersetup{
        colorlinks=true,
        linkcolor=cyan,
        filecolor=blue, % magenta
        urlcolor=blue,
        pdftitle={A summary of Projective Geometric Algebra},
        pdfpagemode=FullScreen,
    }
    \makeatletter % allow @ symbol as a character

%\setlength{\skip\footins}{10mm}
%\setlength{\parskip}{1ex}

% utility functions
    \newcommand{\M}[1]{\scriptstyle{#1}} % math text
    \newcommand{\T}[1]{\textrm{#1}} % text in math mode
    \newcommand{\B}[1]{\left(#1\right)} % big brackets
    \newcommand{\F}[2]{\frac{#1}{#2}} % fraction
    \newcommand{\percent}{\T{ \% }}
    \newcommand{\pow}{\T{ }\M{**}\T{ }}
    \newcommand{\rem}{\T{ rem }}
    \newcommand{\ifelse}[3]{#1\T{ ? }#2\T{ : }#3}
    \newcommand{\plusminus}{\pm}
    \newcommand{\minusplus}{\mp}
    \newcommand{\booland}{\T{ }\M{\&\&}\T{ }}
    \newcommand{\boolor}{\T{ }\M{||}\T{ }}
    \newcommand{\bitand}{\T{ }\M{\&}\T{ }}
    \newcommand{\bitor}{\T{ }\M{|}\T{ }}
    \newcommand{\bitxor}{\T{ }\raisebox{0.5ex}{$\scriptstyle\wedge$}\T{ }}
    \newcommand{\rightshift}{\T{ }\M{>>}\T{ }}
    \newcommand{\leftshift}{\T{ }\M{<<}\T{ }}
    \newcommand{\matrixmul}{\T{ }\M{@}\T{ }}
    \newcommand{\braket}[1]{\left\langle{#1}\right\rangle}
    \newcommand{\floor}[1]{{\left\lfloor{#1}\right\rfloor}}
    \newcommand{\aside}[1]{\begin{flushright}\scriptsize{#1}\end{flushright}}

    % dashed overline
    \newcommand{\overdash}[1]{%
        \tikz[baseline=(todotted.base)]{
            \node[inner sep=1pt,outer sep=0pt] (todotted) {$#1$};
            \draw[dashed, line width=0.05mm] (todotted.north west) -- (todotted.north east);
        }%
    }
    \newcommand{\underdash}[1]{%
        \tikz[baseline=(todotted.base)]{
            \node[inner sep=1pt,outer sep=0pt] (todotted) {$#1$};
            \draw[dashed, line width=0.2mm] (todotted.south west) -- (todotted.south east);
        }%
    }

% header
\title{A summary of Projective Geometric Algebra}
\author{\textsc{Patrolin}}
\date{\today}
\newcommand{\abstracttext}{
    This is an explanation of how to calculate PGA, but not necessarily why it works
    - for that you can try \href{https://www.youtube.com/playlist?list=PLVuwZXwFua-0Ks3rRS4tIkswgUmDLqqRy}{sudgylacmoe} on youtube.
    I would also point you to \href{https://bivector.net/tools.html}{bivector.net}, but their dual calculations are whack,
    the \href{https://enki.ws/ganja.js/examples/coffeeshop.html\#sUwbwu9vR}{ganja.js} ones are presumably correct, since their demos work.
}

% body
\begin{document}
    \maketitle
    \thispagestyle{empty}

    \begin{multicols*}{2}
        \section{Geometric numbers}
            \centerline{$ 1 + x^2 = 0 $}
            \centerline{$ x = \T{?} $}\vspace{5px}
            \par
                x is not a real number; but if it's not real, why should the other numbers be real?
                \begin{gather*}
                    \B{e_1}^2 + \B{e_2}^2 = \B{e_0}^2 \\
                    \B{e_1}^2 = 1;\, \B{e_2}^2 = -1;\, \B{e_0}^2 = 0
                \end{gather*}
            \par
                In fact, we can define as many of these as we want, the simplest examples being:
                $$\begin{aligned}
                    &a + b e_1 \texttt{ // hyperbolic numbers} \\
                    &a + b e_2 \texttt{ // complex numbers} \\
                    &a + b e_0 \texttt{ // dual numbers}
                \end{aligned}$$
            \par
                We can multiply these numbers together using the geometric product:
                \begin{gather*}
                    e_i e_i = \{1, -1, 0\} \\
                    e_i e_j = -e_j e_i
                \end{gather*}
            \par
                This product is neither commutative nor anticommutative, but it is distributive and associative:
                $$\begin{aligned}
                    AB &\neq BA \\
                    AB &\neq -BA \\
                    A(B+C) &= AB + AC \\
                    (AB)C &= A(BC) \\
                    aB &= Ba;\, a \in \mathbb{R}
                \end{aligned}$$
            \vfill\null\columnbreak
            \par
                Thus the product of two complex numbers:
                $$\begin{aligned}
                    & (A_1 + A_2 e_2)(B_1 + B_2 e_2) \\
                    & = A_1 B_1 + A_1 B_2 e_2 + A_2 e_2 B_1 + A_2 e_2 B_2 e_2 \\
                    & = A_1 B_1 + A_1 B_2 e_2 + A_2 B_1 e_2 + A_2 B_2 \\
                    & = (A_1 B_1 + A_2 B_2) + (A_1 B_2 + A_2 B_1) e_2
                \end{aligned}$$
        \section{Rotations}
            \par
                A multivector with n basis vectors consists of $ 2^n $ blades:
                \begin{enumerate}[-]
                    \item \texttt{scalar = 0-vector =} $\mathbf{1}$
                    \item \texttt{vector = 1-vector}
                    \item \texttt{bivector = 2-vector}
                    \item \texttt{trivector = 3-vector}
                    \item \texttt{...}
                    \item \texttt{(n-1)-vector = pseudovector}
                    \item \texttt{n-vector = pseudoscalar =} $\mathbb{1}$
                \end{enumerate} \vspace{5px}
                Where a k-vector has $n \choose k$ blades, for example:
                $$\begin{aligned}
                    A = & \, A_1 \\
                    &+ A_2 e_0 + A_3 e_1 + A_4 e_2 \\
                    &+ A_5 e_{01} + A_6 e_{02} + A_7 e_{12} \\
                    &+ A_8 e_{012} \\
                \end{aligned}$$
                \aside{We can abbreviate blades like $ e_1 e_2 $ as $ e_{12} $.}
            \par
                Multiplying two multivectors gives you another multivector,
                we can use the taylor series expansion of the exponential function
                to find a rotation $e^A$:
                $$ e^x = \sum_{k=0}^\infty \F{x^k}{k!} $$
                $$\begin{aligned}
                    &e^{a e_2} = 1 + a e_2 - \F{a^2}{2} - \F{a^3}{3} e_2 + ... \\
                    &= (1 - \F{a^2}{2} + ...) + (a - \F{a^3}{3} + ...) e_2 \\
                    &= cos(a) + sin(a) e_2 \\
                \end{aligned}$$
            \par
                Similarly you can find
                $$ e^{e_i} = \begin{cases}
                    cos(a) + sin(a) e_i & (\B{e_i}^2 = -1) \\
                    cosh(a) + sinh(a) e_i & (\B{e_i}^2 = 1) \\
                    1 + e_i & (\B{e_i}^2 = 0)
                    \end{cases}$$
            \par
                This gives us rotations, hyperbolic rotations and translations (rotations through infinity) respectively.
            \par
                Then for a multivector we would have:
                \begin{gather*}
                    e^A = e^{A_1} e^{A_2 e_0} e^{A_3 e_1} \, ... \, e^{A_n e_I} \\
                \end{gather*}
        \section{Unary operators}
            \par
                For the i-th blade in a multivector
                $$ X_i \in \T{k-vector} $$
                we can define some operations, like reversing the order of
                basis vectors in the blade, that amount to flipping some signs:
                $$\begin{aligned}
                    \tilde{X_i} &= (-1)^\floor{k/2} X_i \texttt{ // reverse} \\
                    X_i^\dagger &= (-1)^\floor{k} X_i \texttt{ // involute} \\
                    \bar{X_i} &= (-1)^\floor{k+k/2} X_i \texttt{ // conjugate} \\
                    &f(A) = \sum_i f(X_i)
                \end{aligned}$$
            \par
                Poincaré duality states that maps between k-vectors and (n-k)-vectors exist.
                \begin{gather*}
                    X_i \, dual(X_i) = \plusminus \mathbb{1} \\
                    dual(X_i) = \plusminus X_{2^n-i+1} \\
                    dual(A) = \sum_i dual(X_i)
                \end{gather*}
            \par
                For example:
                \begin{gather*}
                    \underline{X_i} X_i = \mathbb{1} \texttt{ // left complement} \\
                    X_i \overline{X_i} = \mathbb{1} \texttt{ // right complement} \\
                    X_i X_i^\star = sign(X^{ND}_i \widetilde{X^{ND}_i}) \, \mathbb{1} \texttt{ // hodge dual}
                \end{gather*}
                Where $ X^{ND}_i $ is $ X_i $ without degenerate basis vectors, e.g.
                $$ X_i = e_{012}; \, X^{ND}_i = e_{12} $$
            \par
                Let $ \mathbb{G}_{a,b,c} $ be a geometric algebra with $ a $ positive,
                $ b $ negative and $ c $ zero basis vectors.
            \par
                Then for $ \mathbb{G}_{a,0,c} $:
                $$ \overline{X_i} = X_i^\star $$
            \par
                And if all that wasn't confusing enough, applying a dual twice changes the signs,
                so we also want the inverses of these duals:
                \begin{gather*}
                    (X_i^\star)^{\star^{-1}} = X_i \\
                    \overdash{\overline{X_i}} = X_i \\
                    \underdash{\underline{X_i}} = X_i
                \end{gather*}
        \section{Shapes and sizes}
            \par
                Let $ \mathbb{G}_{d+1,0,1} $ be a d-dimensional PGA with $ (e_0)^2 = 0 $ and $ (e_i)^2 = 1 $.
            \par
                It turns out, in 2D and 3D, we can simplify implementations
                by swapping two basis vectors in some blades such that
                $ \overline{X_i} $ does not flip signs, e.g.
                $$\begin{aligned}
                    A = & \, A_1 + A_2 e_0 + A_3 e_1 + A_4 e_2 \\
                    &+ A_5 e_{01} + A_6 e_{20} + A_7 e_{12} + A_8 e_{012} \\
                    \overline{A} = & \, A_8 + A_7 e_0 + A_6 e_1 + A_5 e_2 \\
                    &+ A_4 e_{01} + A_3 e_{20} + A_2 e_{12} + A_1 e_{012} \\
                \end{aligned}$$
            \par
                Points in PGA are represented by (n-1)-vectors:
                $$ \overline{e_0 + x e_1 + y e_2 + ...} $$
                \aside{This is a kind of a lie, you can make an equivalent dual algebra by letting points be vectors,
                in fact many operations make use of computing in this dual algebra via $ \overdash{\overline{A} \T{ op } \overline{B}} $}
            \par
                Let $ \braket{A}_k $ be the grade selection operator:
                \begin{gather*}
                    \braket{A}_k = \sum_i \braket{X_i}_k \\
                    \braket{X_i}_k = \begin{cases}
                        X_i & (X_i \in \T{k-vector}) \\
                        0 & (X_i \notin \T{k-vector})
                    \end{cases}
                \end{gather*}
            \par
                Then we can start defining binary operators:
                $$\begin{aligned}
                    A \cdot B &= \sum_{j,k} \braket{\braket{A}_j \braket{B}_k}_{0} \texttt{ // dot product} \\
                    A \wedge B &= \sum_{j,k} \braket{\braket{A}_j \braket{B}_k}_{j+k} \texttt{ // wedge product} \\
                    A \vee B &= \overdash{\overline{A} \wedge \overline{B}} \texttt{ // antiwedge product}
                \end{aligned}$$
                \aside{In other words the wedge product is equal to the geometric product if the grades add together:
                    $ \T{j-vector} \wedge \T{k-vector} = \T{(j+k)-vector} $, otherwise it's $ 0 $}
                \aside{All of these operators retain distributivity and associativity}
            \par
                The antiwedge product allows you to join points into lines, planes, ...
                $$\begin{aligned}
                    line &= point_1 \vee point_2 \\
                    plane &= point_1 \vee point_2 \vee point_3
                \end{aligned}$$
                \aside{In fact this works with any two geometric objects, operators that don't have this property aren't really worth your time.}
            \par
                And the wedge product allows you to meet two objects:
                $$\begin{aligned}
                    &point = line_1 \wedge line_2 \\
                    &line = plane_1 \wedge plane_2
                \end{aligned}$$
            \par
                If you meet two parallel lines, you get an infinite point = a point at infinity:
                $$ line_1 \wedge line_1 = \overline{x e_1 + y e_2 + ...} $$ % TODO: check this
                \aside{All objects in GA have an orientation, so if you flip the direction of one of the lines,
                you would get an infinite point in the other direction}
            \par
                TODO: something about sizes of line segments / volumes
            \par
                TODO: projection to camera plane + depth buffer
        \section{Motors}
            \par
                TODO: something about bivector blades being rotations
                $$\begin{aligned}
                    rotor &= e^{bivector^{ND}} \\
                    motor &= e^{bivector}
                \end{aligned}$$
                \aside{In 3D, rotors are quaternions.} % TODO: and motors are dual quaternions?
            \par
                TODO: applying motors and line forces
    \end{multicols*}
\end{document}
